{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"/Users/DEV/Desktop/covidweb/pages/index.tsx\",\n    _this4 = this;\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//@ts-ignore\nimport React, { useState, useMemo } from 'react';\nimport Layout from '../components/Layout';\nimport DeckGL, { TileLayer, BitmapLayer } from \"deck.gl\";\nimport { Marker, FlyToInterpolator } from 'react-map-gl';\nimport { getPopulation } from '../assests/countries';\nimport codes from '../assests/codes';\nvar tileServer = 'https://c.tile.openstreetmap.org/';\nexport var __N_SSG = true;\nexport var INITIAL_VIEW_STATE = {\n  latitude: 47.65,\n  longitude: 7,\n  zoom: 4.5,\n  maxZoom: 20,\n  bearing: 0\n};\n\nvar radius = function radius(opa) {\n  var op = opa / 200;\n\n  if (op > 100) {\n    op = 100;\n  }\n\n  if (op < 20) {\n    op *= 3;\n  }\n\n  return op;\n};\n\nvar opacity = function opacity(opa) {\n  var op = opa / 200;\n\n  if (op < 0.3) {\n    op = 0.3;\n  }\n\n  return op;\n};\n\nvar TOKEN = 'pk.eyJ1IjoibWFydGlzOTAwIiwiYSI6ImNrMTZtazN4ODBhNGUzbW1yc245dG9nZzYifQ.T2ImKPTOuImP5pW11SXoWg';\n\nfunction HomePage(_ref) {\n  var _this = this;\n\n  var data = _ref.data;\n\n  var _useState = useState({\n    width: 400,\n    height: 400,\n    latitude: 50,\n    longitude: 0,\n    zoom: 1,\n    visibilityConstraints: 1\n  }),\n      viewport = _useState[0],\n      setViewport = _useState[1];\n\n  var _useState2 = useState(\"Infected\"),\n      type = _useState2[0],\n      setType = _useState2[1];\n\n  return __jsx(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'row'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }\n  }, __jsx(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    style: {\n      color: 'white',\n      flexDirection: 'row',\n      display: 'flex',\n      height: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    style: {\n      display: 'flex',\n      position: 'relative',\n      height: 'calc(100vh - 112px)',\n      flexDirection: 'column'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 21\n    }\n  }, __jsx(\"h3\", {\n    style: {\n      color: 'white',\n      fontFamily: 'Poppins',\n      marginBottom: 0\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 25\n    }\n  }, \"Coronavirus COVID-19\"), __jsx(\"h5\", {\n    style: {\n      color: 'grey',\n      fontFamily: 'Poppins',\n      marginTop: 0\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 25\n    }\n  }, \"Global Cases\"), __jsx(Map, {\n    data: data,\n    viewport: viewport,\n    setViewport: setViewport,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 25\n    }\n  })))), useMemo(function () {\n    return __jsx(\"div\", {\n      style: {\n        height: 'calc(100vh - 41px)',\n        width: '100%',\n        padding: 20,\n        display: 'flex',\n        flexDirection: 'column',\n        background: 'rgb(34,37,41)'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 28\n      }\n    }, __jsx(\"h3\", {\n      style: {\n        color: 'white',\n        fontFamily: 'Poppins'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 25\n      }\n    }, \"Cases Info\"), __jsx(\"span\", {\n      style: {\n        justifyContent: 'space-around',\n        width: '100%',\n        display: 'flex'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 25\n      }\n    }, __jsx(\"button\", {\n      onClick: function onClick() {\n        return setType(\"Infected\");\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 29\n      }\n    }, \"Infected\"), __jsx(\"button\", {\n      onClick: function onClick() {\n        return setType(\"Deaths\");\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 29\n      }\n    }, \"Deaths\"), __jsx(\"button\", {\n      onClick: function onClick() {\n        return setType(\"Recovered\");\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 29\n      }\n    }, \"Recovered\")), __jsx(\"ul\", {\n      style: {\n        margin: 0,\n        paddingLeft: 30,\n        paddingRight: 30,\n        height: '100%',\n        overflowY: 'scroll',\n        scrollBehavior: 'smooth',\n        display: 'flex',\n        flexDirection: 'column'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 25\n      }\n    }, __jsx(List, {\n      data: data,\n      type: type,\n      handleAnimate: function handleAnimate(_long, lat) {\n        return setViewport(_objectSpread({}, viewport, {\n          latitude: lat,\n          longitude: _long,\n          zoom: 4,\n          transitionInterpolator: new FlyToInterpolator()\n        }));\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 29\n      }\n    })));\n  }, [data, type]));\n}\n\nfunction Map(_ref2) {\n  var _this2 = this;\n\n  var data = _ref2.data,\n      viewport = _ref2.viewport,\n      setViewport = _ref2.setViewport;\n\n  var _useState3 = useState({\n    visible: false\n  }),\n      showPopup = _useState3[0],\n      setShowPopup = _useState3[1];\n\n  return __jsx(React.Fragment, null, showPopup.visible === true && __jsx(LocationDetails, {\n    showPopup: showPopup,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 44\n    }\n  }), __jsx(DeckGL, {\n    initialViewState: {\n      longitude: -74.006,\n      latitude: 40.7128,\n      zoom: 12\n    },\n    width: \"100vh\",\n    height: \"100vh\",\n    layers: function layers() {\n      var _this2$props = _this2.props,\n          _this2$props$autoHigh = _this2$props.autoHighlight,\n          autoHighlight = _this2$props$autoHigh === void 0 ? true : _this2$props$autoHigh,\n          _this2$props$highligh = _this2$props.highlightColor,\n          highlightColor = _this2$props$highligh === void 0 ? [60, 60, 60, 40] : _this2$props$highligh;\n      return [new TileLayer({\n        pickable: true,\n        onHover: _this2._onHover,\n        autoHighlight: autoHighlight,\n        highlightColor: highlightColor,\n        opacity: 1,\n        // https://wiki.openstreetmap.org/wiki/Zoom_levels\n        minZoom: 0,\n        maxZoom: 19,\n        renderSubLayers: function renderSubLayers(props) {\n          var _props$tile = props.tile,\n              x = _props$tile.x,\n              y = _props$tile.y,\n              z = _props$tile.z,\n              bbox = _props$tile.bbox;\n          var west = bbox.west,\n              south = bbox.south,\n              east = bbox.east,\n              north = bbox.north;\n          return new BitmapLayer(props, {\n            image: \"\".concat(tileServer, \"/\").concat(z, \"/\").concat(x, \"/\").concat(y, \".png\"),\n            bounds: [west, south, east, north]\n          });\n        }\n      })];\n    },\n    controller: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }\n  }, function () {\n    var _this2$state = _this2.state,\n        x = _this2$state.x,\n        y = _this2$state.y,\n        hoveredObject = _this2$state.hoveredObject;\n\n    var _ref3 = hoveredObject || {},\n        sourceLayer = _ref3.sourceLayer,\n        tile = _ref3.tile;\n\n    return sourceLayer && tile && __jsx(\"div\", {\n      className: \"tooltip\",\n      style: {\n        left: x,\n        top: y\n      },\n      __self: _this2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 29\n      }\n    }, \"tile: x: \", tile.x, \", y: \", tile.y, \", z: \", tile.z);\n  }));\n}\n\nfunction List(_ref4) {\n  var _this3 = this;\n\n  var data = _ref4.data,\n      type = _ref4.type,\n      handleAnimate = _ref4.handleAnimate;\n\n  function sorted() {\n    if (type === \"Infected\") {\n      return data.areas.sort(function (a, b) {\n        return b.totalConfirmed - a.totalConfirmed;\n      });\n    } else if (type === \"Deaths\") {\n      return data.areas.sort(function (a, b) {\n        return b.totalDeaths - a.totalDeaths;\n      });\n    } else if (type === \"Recovered\") {\n      return data.areas.sort(function (a, b) {\n        return b.totalRecovered - a.totalRecovered;\n      });\n    }\n  }\n\n  if (sorted.length > 0) return null;\n  return sorted().map(function (area) {\n    var _area$totalConfirmed, _area$totalRecovered, _area$totalDeaths;\n\n    return __jsx(\"li\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center'\n      },\n      __self: _this3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }\n    }, __jsx(\"div\", {\n      style: {\n        borderRadius: '50%',\n        width: 20,\n        height: 20,\n        overflow: 'hidden',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center'\n      },\n      onClick: function onClick() {\n        return handleAnimate(area[\"long\"], area.lat);\n      },\n      __self: _this3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 13\n      }\n    }, __jsx(\"img\", {\n      src: \"https://www.countryflags.io/\".concat(codes(area.displayName) || 'us', \"/shiny/64.png\"),\n      alt: \"123\",\n      style: {\n        width: '160%',\n        height: '160%',\n        objectFit: 'cover',\n        borderRadius: '50%'\n      },\n      __self: _this3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 17\n      }\n    })), __jsx(\"h5\", {\n      style: {\n        paddingLeft: 15,\n        color: 'grey',\n        margin: '0 auto 0 0'\n      },\n      __self: _this3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 13\n      }\n    }, area.displayName), __jsx(\"h5\", {\n      style: {\n        color: 'white'\n      },\n      __self: _this3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 13\n      }\n    }, type === \"Infected\" ? (_area$totalConfirmed = area.totalConfirmed) === null || _area$totalConfirmed === void 0 ? void 0 : _area$totalConfirmed.toLocaleString('en-US') : type === \"Recovered\" ? (_area$totalRecovered = area.totalRecovered) === null || _area$totalRecovered === void 0 ? void 0 : _area$totalRecovered.toLocaleString('en-US') : type === \"Deaths\" && ((_area$totalDeaths = area.totalDeaths) === null || _area$totalDeaths === void 0 ? void 0 : _area$totalDeaths.toLocaleString('en-US'))));\n  });\n}\n\nvar LocationDetails = function LocationDetails(_ref5) {\n  var _showPopup$region$tot, _showPopup$region$tot2, _showPopup$region$tot3, _showPopup$region$tot4, _showPopup$region$tot5, _showPopup$region$tot6;\n\n  var showPopup = _ref5.showPopup;\n  return __jsx(\"div\", {\n    style: {\n      width: 400,\n      height: 200,\n      position: 'absolute',\n      top: 25,\n      left: 25,\n      backgroundColor: 'white',\n      zIndex: 99999999,\n      padding: 15,\n      borderRadius: 8\n    },\n    __self: _this4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 9\n    }\n  }, showPopup.country === true ? __jsx(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'row',\n      alignItems: 'center'\n    },\n    __self: _this4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    style: {\n      borderRadius: '50%',\n      width: 20,\n      height: 20,\n      overflow: 'hidden',\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n    __self: _this4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 21\n    }\n  }, __jsx(\"img\", {\n    src: \"https://www.countryflags.io/\".concat(codes(showPopup.country === true ? showPopup.region.displayName : showPopup.country) || 'us', \"/shiny/64.png\"),\n    alt: \"123\",\n    style: {\n      width: '160%',\n      height: '160%',\n      objectFit: 'cover',\n      borderRadius: '50%'\n    },\n    __self: _this4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 25\n    }\n  })), __jsx(\"h3\", {\n    style: {\n      color: 'black',\n      paddingLeft: 10\n    },\n    __self: _this4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 21\n    }\n  }, showPopup.region.displayName)) : __jsx(\"span\", {\n    style: {\n      color: 'black',\n      display: 'flex',\n      flexDirection: 'row',\n      alignItems: 'center'\n    },\n    __self: _this4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 17\n    }\n  }, __jsx(\"h3\", {\n    __self: _this4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 111\n    }\n  }, showPopup.region.displayName, \" \"), \" \", __jsx(\"label\", {\n    style: {\n      paddingLeft: 8\n    },\n    __self: _this4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 152\n    }\n  }, showPopup.country)), __jsx(\"p\", {\n    style: {\n      flex: 1,\n      color: 'rgb(252,184,44)',\n      fontSize: 12\n    },\n    __self: _this4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 13\n    }\n  }, __jsx(\"b\", {\n    __self: _this4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 76\n    }\n  }, \"Confirmed:\"), \"  \", (_showPopup$region$tot = (_showPopup$region$tot2 = showPopup.region.totalConfirmed) === null || _showPopup$region$tot2 === void 0 ? void 0 : _showPopup$region$tot2.toLocaleString('en-US')) !== null && _showPopup$region$tot !== void 0 ? _showPopup$region$tot : 0), __jsx(\"p\", {\n    style: {\n      flex: 1,\n      color: 'rgb(50,203,111)',\n      fontSize: 12\n    },\n    __self: _this4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 13\n    }\n  }, __jsx(\"b\", {\n    __self: _this4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 76\n    }\n  }, \"Recovered:\"), (_showPopup$region$tot3 = (_showPopup$region$tot4 = showPopup.region.totalRecovered) === null || _showPopup$region$tot4 === void 0 ? void 0 : _showPopup$region$tot4.toLocaleString('en-US')) !== null && _showPopup$region$tot3 !== void 0 ? _showPopup$region$tot3 : 0), __jsx(\"p\", {\n    style: {\n      flex: 1,\n      color: 'red',\n      fontSize: 12\n    },\n    __self: _this4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 13\n    }\n  }, __jsx(\"b\", {\n    __self: _this4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 64\n    }\n  }, \"Deaths:\"), \" \", (_showPopup$region$tot5 = (_showPopup$region$tot6 = showPopup.region.totalDeaths) === null || _showPopup$region$tot6 === void 0 ? void 0 : _showPopup$region$tot6.toLocaleString('en-US')) !== null && _showPopup$region$tot5 !== void 0 ? _showPopup$region$tot5 : 0), showPopup.country === true && __jsx(\"h3\", {\n    style: {\n      flex: 1,\n      color: 'black',\n      fontSize: 12\n    },\n    __self: _this4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 44\n    }\n  }, __jsx(\"b\", {\n    __self: _this4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 98\n    }\n  }, \"Population:\"), \"  \", Number(showPopup.region.totalConfirmed * 100 / getPopulation(showPopup.region.displayName)).toFixed(2), \"%\"));\n};\n\nvar RenderCountries = function RenderCountries(_ref6) {\n  var data = _ref6.data,\n      showPopup = _ref6.showPopup,\n      setShowPopup = _ref6.setShowPopup;\n  return data.areas.map(function (region) {\n    var _showPopup$region;\n\n    return __jsx(RedBubbleMarker, {\n      key: region.displayName,\n      width: 10,\n      region: region,\n      onClick: function onClick() {\n        return setShowPopup({\n          visible: true,\n          region: region,\n          country: true\n        });\n      },\n      selected: region.displayName === ((_showPopup$region = showPopup.region) === null || _showPopup$region === void 0 ? void 0 : _showPopup$region.displayName),\n      __self: _this4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 16\n      }\n    });\n  });\n};\n\nvar RenderCities = function RenderCities(_ref7) {\n  var data = _ref7.data,\n      showPopup = _ref7.showPopup,\n      setShowPopup = _ref7.setShowPopup;\n  return data.areas.map(function (c) {\n    return c.areas.map(function (region) {\n      var _showPopup$region2;\n\n      return __jsx(RedBubbleMarker, {\n        key: region.displayName,\n        width: 5,\n        region: region,\n        onClick: function onClick() {\n          return setShowPopup({\n            visible: true,\n            region: region,\n            country: c.displayName\n          });\n        },\n        selected: region.displayName === ((_showPopup$region2 = showPopup.region) === null || _showPopup$region2 === void 0 ? void 0 : _showPopup$region2.displayName),\n        __self: _this4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 20\n        }\n      });\n    });\n  });\n};\n\nvar RedBubbleMarker = function RedBubbleMarker(_ref8) {\n  var width = _ref8.width,\n      region = _ref8.region,\n      onClick = _ref8.onClick,\n      selected = _ref8.selected;\n  return __jsx(Marker, {\n    key: region.displayName,\n    longitude: region[\"long\"],\n    latitude: region.lat,\n    captureDrag: false,\n    __self: _this4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 5\n    }\n  }, __jsx(\"svg\", {\n    onClick: onClick,\n    style: {\n      cursor: 'pointer',\n      fill: '#d00',\n      stroke: 'none',\n      width: width * 2 + 10,\n      height: width * 2 + 10,\n      transform: \"translate(\".concat(-width / 2, \"px,\").concat(-width, \"px)\")\n    },\n    __self: _this4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 9\n    }\n  }, __jsx(\"circle\", {\n    cx: width + 5,\n    cy: width + 5,\n    r: width,\n    fill: \"red\",\n    strokeWidth: selected ? 3 : 0,\n    stroke: selected ? \"orange\" : \"red\",\n    style: {\n      fillOpacity: opacity(region.totalDeaths)\n    },\n    __self: _this4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 13\n    }\n  })));\n};\n\nexport default React.memo(HomePage);","map":{"version":3,"sources":["/Users/DEV/Desktop/covidweb/pages/index.tsx"],"names":["React","useState","useMemo","Layout","DeckGL","TileLayer","BitmapLayer","Marker","FlyToInterpolator","getPopulation","codes","tileServer","INITIAL_VIEW_STATE","latitude","longitude","zoom","maxZoom","bearing","radius","opa","op","opacity","TOKEN","HomePage","data","width","height","visibilityConstraints","viewport","setViewport","type","setType","display","flexDirection","color","position","fontFamily","marginBottom","marginTop","padding","background","justifyContent","margin","paddingLeft","paddingRight","overflowY","scrollBehavior","long","lat","transitionInterpolator","Map","visible","showPopup","setShowPopup","props","autoHighlight","highlightColor","pickable","onHover","_onHover","minZoom","renderSubLayers","tile","x","y","z","bbox","west","south","east","north","image","bounds","state","hoveredObject","sourceLayer","left","top","List","handleAnimate","sorted","areas","sort","a","b","totalConfirmed","totalDeaths","totalRecovered","length","map","area","alignItems","borderRadius","overflow","displayName","objectFit","toLocaleString","LocationDetails","backgroundColor","zIndex","country","region","flex","fontSize","Number","toFixed","RenderCountries","RenderCities","c","RedBubbleMarker","onClick","selected","cursor","fill","stroke","transform","fillOpacity","memo"],"mappings":"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","sourcesContent":["//@ts-ignore\n\nimport React, { useState, useMemo, useEffect, useRef } from 'react'\nimport fetch from 'isomorphic-unfetch';\nimport Layout from '../components/Layout'\nimport Link from 'next/link'\nimport dayjs from 'dayjs'\nimport DeckGL, { TileLayer, BitmapLayer } from \"deck.gl\";\nimport ReactMapGL, { Marker, Popup, StaticMap, Source, Layer, FlyToInterpolator } from 'react-map-gl';\nimport { getPopulation } from '../assests/countries'\n\nimport { ComposedChart, XAxis, YAxis, Tooltip, Legend, CartesianGrid, Area, Bar, Line } from 'recharts'\n\nimport Chart from '../components/Chart'\nimport codes from '../assests/codes'\n\nconst tileServer = 'https://c.tile.openstreetmap.org/';\n\n\nexport const INITIAL_VIEW_STATE = {\n    latitude: 47.65,\n    longitude: 7,\n    zoom: 4.5,\n    maxZoom: 20,\n    bearing: 0\n};\n\ninterface API {\n    id: string;\n    displayName: string;\n    areas: API[];\n    totalConfirmed: number;\n    totalDeaths: number;\n    totalRecovered: number;\n    totalRecoveredDelta: number;\n    totalDeathsDelta: number;\n    totalConfirmedDelta: number;\n    lastUpdated: Date;\n    lat?: number;\n    long?: number;\n}\n\ninterface IHistoryData {\n    hospitalizedWithSymptoms: number;\n    intensiveTherapy: number;\n    totalHospitalized: number;\n    homeInsulation: number;\n    totalCurrentlyPositive: number;\n    newCurrentlyPositive: number;\n    dischargedHealed: number;\n    deceased: number;\n    totalCases: number;\n    tamponi: number;\n    sourceUrl: string;\n    lastUpdatedAtSource: Date;\n    lastUpdatedAtApify: Date;\n    readMe: string;\n}\n\ninterface IProps {\n    data: API\n    history: any\n}\n\nconst radius = (opa) => {\n    let op = (opa) / 200\n\n    if (op > 100) {\n        op = 100\n    }\n    if (op < 20) {\n        op *= 3\n    }\n    return op\n}\n\nconst opacity = (opa) => {\n    let op = (opa) / 200\n    if (op < 0.3) {\n        op = 0.3\n    }\n    return op\n}\n\nconst TOKEN = 'pk.eyJ1IjoibWFydGlzOTAwIiwiYSI6ImNrMTZtazN4ODBhNGUzbW1yc245dG9nZzYifQ.T2ImKPTOuImP5pW11SXoWg';\n\nfunction HomePage({ data }: IProps) {\n    const [viewport, setViewport]: any = useState({\n        width: 400,\n        height: 400,\n        latitude: 50,\n        longitude: 0,\n        zoom: 1,\n        visibilityConstraints: 1,\n    });\n    const [type, setType] = useState<'Infected' | 'Deaths' | 'Recovered'>(\"Infected\")\n\n    return (\n        <div style={{ display: 'flex', flexDirection: 'row' }}>\n            <Layout>\n                <div style={{ color: 'white', flexDirection: 'row', display: 'flex', height: '100%' }}>\n                    <div style={{ display: 'flex', position: 'relative', height: 'calc(100vh - 112px)', flexDirection: 'column' }}>\n                        <h3 style={{ color: 'white', fontFamily: 'Poppins', marginBottom: 0 }}>Coronavirus COVID-19</h3>\n                        <h5 style={{ color: 'grey', fontFamily: 'Poppins', marginTop: 0 }}>Global Cases</h5>\n\n                        <Map data={data} viewport={viewport} setViewport={setViewport} />\n\n                    </div>\n                </div>\n            </Layout>\n            {\n                useMemo(() => {\n                    return <div style={{ height: 'calc(100vh - 41px)', width: '100%', padding: 20, display: 'flex', flexDirection: 'column', background: 'rgb(34,37,41)' }}>\n                        <h3 style={{ color: 'white', fontFamily: 'Poppins' }}>Cases Info</h3>\n\n                        <span style={{ justifyContent: 'space-around', width: '100%', display: 'flex' }}>\n                            <button onClick={() => setType(\"Infected\")}>Infected</button>\n                            <button onClick={() => setType(\"Deaths\")}>Deaths</button>\n                            <button onClick={() => setType(\"Recovered\")}>Recovered</button>\n                        </span>\n\n                        <ul style={{ margin: 0, paddingLeft: 30, paddingRight: 30, height: '100%', overflowY: 'scroll', scrollBehavior: 'smooth', display: 'flex', flexDirection: 'column' }}>\n                            <List data={data} type={type} handleAnimate={(long, lat) => setViewport({ ...viewport, latitude: lat, longitude: long, zoom: 4, transitionInterpolator: new FlyToInterpolator(), })} />\n                        </ul>\n                    </div>\n                }, [data, type])\n            }\n        </div >\n    )\n}\n\nfunction Map({ data, viewport, setViewport }: { data: API, viewport: any, setViewport: any }) {\n\n    const [showPopup, setShowPopup]: any = useState<{ visible: boolean, region?: API, country?: boolean | string }>({ visible: false })\n\n\n    return (\n        <>\n            {showPopup.visible === true && <LocationDetails showPopup={showPopup} />}\n            <DeckGL\n                initialViewState={{\n                    longitude: -74.006,\n                    latitude: 40.7128,\n                    zoom: 12\n                }}\n                width=\"100vh\"\n                height=\"100vh\"\n                layers={() => {\n                    const { autoHighlight = true, highlightColor = [60, 60, 60, 40] } = this.props;\n\n                    return [\n                        new TileLayer({\n                            pickable: true,\n                            onHover: this._onHover,\n                            autoHighlight,\n                            highlightColor,\n                            opacity: 1,\n                            // https://wiki.openstreetmap.org/wiki/Zoom_levels\n                            minZoom: 0,\n                            maxZoom: 19,\n\n                            renderSubLayers: props => {\n                                const { x, y, z, bbox } = props.tile;\n                                const { west, south, east, north } = bbox;\n\n                                return new BitmapLayer(props, {\n                                    image: `${tileServer}/${z}/${x}/${y}.png`,\n                                    bounds: [west, south, east, north]\n                                });\n                            }\n                        })\n                    ];\n                }}\n                controller={true}\n            >\n                {() => {\n                    const { x, y, hoveredObject } = this.state;\n                    const { sourceLayer, tile } = hoveredObject || {};\n                    return (\n                        sourceLayer &&\n                        tile && (\n                            <div className=\"tooltip\" style={{ left: x, top: y }}>\n                                tile: x: {tile.x}, y: {tile.y}, z: {tile.z}\n                            </div>\n                        )\n                    );\n                }}\n            </DeckGL>\n\n        </>\n    )\n}\n\nfunction List({ data, type, handleAnimate }: any) {\n\n    function sorted() {\n        if (type === \"Infected\") {\n            return data.areas.sort((a: API, b: API) => b.totalConfirmed - a.totalConfirmed);\n        }\n        else if (type === \"Deaths\") {\n            return data.areas.sort((a: API, b: API) => b.totalDeaths - a.totalDeaths);\n        }\n        else if (type === \"Recovered\") {\n            return data.areas.sort((a: API, b: API) => b.totalRecovered - a.totalRecovered);\n        }\n    }\n\n    if (sorted.length > 0) return null\n    return sorted().map((area: API) => (\n        <li style={{ display: 'flex', flexDirection: 'row', alignItems: 'center' }}>\n            <div style={{ borderRadius: '50%', width: 20, height: 20, overflow: 'hidden', display: 'flex', justifyContent: 'center', alignItems: 'center' }} onClick={() => handleAnimate(area.long, area.lat)}>\n                <img src={`https://www.countryflags.io/${codes(area.displayName) || 'us'}/shiny/64.png`} alt=\"123\" style={{ width: '160%', height: '160%', objectFit: 'cover', borderRadius: '50%' }} />\n            </div>\n            <h5 style={{ paddingLeft: 15, color: 'grey', margin: '0 auto 0 0' }}>{area.displayName}</h5>\n            <h5 style={{ color: 'white' }}>{type === \"Infected\" ? area.totalConfirmed?.toLocaleString('en-US') : type === \"Recovered\" ? area.totalRecovered?.toLocaleString('en-US') : type === \"Deaths\" && area.totalDeaths?.toLocaleString('en-US')}</h5>\n        </li>\n    ))\n}\n\nconst LocationDetails = ({ showPopup }: any) => {\n    return (\n        <div style={{\n            width: 400,\n            height: 200,\n            position: 'absolute',\n            top: 25,\n            left: 25,\n            backgroundColor: 'white',\n            zIndex: 99999999,\n            padding: 15,\n            borderRadius: 8\n        }}>\n            {showPopup.country === true\n                ?\n                <div style={{ display: 'flex', flexDirection: 'row', alignItems: 'center' }}>\n                    <div style={{ borderRadius: '50%', width: 20, height: 20, overflow: 'hidden', display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\n                        <img src={`https://www.countryflags.io/${codes(showPopup.country === true ? showPopup.region.displayName : showPopup.country) || 'us'}/shiny/64.png`} alt=\"123\" style={{ width: '160%', height: '160%', objectFit: 'cover', borderRadius: '50%' }} />\n                    </div>\n                    <h3 style={{ color: 'black', paddingLeft: 10 }}>{showPopup.region.displayName}</h3>\n                </div>\n                :\n                <span style={{ color: 'black', display: 'flex', flexDirection: 'row', alignItems: 'center' }}><h3>{showPopup.region.displayName} </h3> <label style={{ paddingLeft: 8 }}>{showPopup.country}</label></span>}\n            <p style={{ flex: 1, color: 'rgb(252,184,44)', fontSize: 12 }}><b>Confirmed:</b>  {showPopup.region.totalConfirmed?.toLocaleString('en-US') ?? 0}</p>\n            <p style={{ flex: 1, color: 'rgb(50,203,111)', fontSize: 12 }}><b>Recovered:</b>{showPopup.region.totalRecovered?.toLocaleString('en-US') ?? 0}</p>\n            <p style={{ flex: 1, color: 'red', fontSize: 12 }}><b>Deaths:</b> {showPopup.region.totalDeaths?.toLocaleString('en-US') ?? 0}</p>\n            {showPopup.country === true && <h3 style={{ flex: 1, color: 'black', fontSize: 12 }}><b>Population:</b>  {Number((showPopup.region.totalConfirmed * 100) / getPopulation(showPopup.region.displayName)).toFixed(2)}%</h3>}\n        </div>\n    )\n}\n\nconst RenderCountries = ({ data, showPopup, setShowPopup }: { data: any, showPopup?: any, setShowPopup?: any }) => {\n    return data.areas.map(region => {\n        return <RedBubbleMarker key={region.displayName} width={10} region={region} onClick={() => setShowPopup({ visible: true, region, country: true })} selected={region.displayName === showPopup.region?.displayName} />\n    })\n}\n\nconst RenderCities = ({ data, showPopup, setShowPopup }: { data: any, showPopup?: any, setShowPopup?: any }) => {\n    return data.areas.map(c => {\n        return c.areas.map(region => {\n            return <RedBubbleMarker key={region.displayName} width={5} region={region} onClick={() => setShowPopup({ visible: true, region, country: c.displayName })} selected={region.displayName === showPopup.region?.displayName} />\n\n        })\n    })\n}\n\n\n\nconst RedBubbleMarker = ({ width, region, onClick, selected }: { width: number, region: API, onClick: () => void, selected: boolean }) => (\n    <Marker key={region.displayName} longitude={region.long} latitude={region.lat} captureDrag={false}>\n        <svg onClick={onClick}\n            style={{\n                cursor: 'pointer',\n                fill: '#d00',\n                stroke: 'none',\n                width: (width * 2) + 10,\n                height: (width * 2) + 10,\n                transform: `translate(${-width / 2}px,${-width}px)`\n            }}>\n            <circle cx={width + 5} cy={width + 5} r={width} fill={\"red\"} strokeWidth={selected ? 3 : 0} stroke={selected ? \"orange\" : \"red\"} style={{ fillOpacity: opacity(region.totalDeaths) }} />\n        </svg>\n    </Marker>\n)\n\nexport async function getStaticProps() {\n    const res = await fetch('https://bing.com/covid/data');\n    const data = await res.json()\n\n    return { props: { data } }\n}\n\nexport default React.memo(HomePage)"]},"metadata":{},"sourceType":"module"}